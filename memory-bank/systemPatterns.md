# Системные паттерны MoonBit

## Архитектурные паттерны

### Клиент-серверная архитектура
- **Клиентская часть**: React SPA (Single Page Application)
- **Серверная часть**: Node.js/Express API

### Разделение клиента и сервера
- Чёткое разделение интерфейса и бизнес-логики
- Клиент отвечает за отображение, сервер за получение и обработку данных
- Взаимодействие через REST API

### Model-View-Controller (MVC) на сервере
- **Models**: `/bitcoin-moon/server/src/models` - структуры данных и бизнес-логика
- **Controllers**: `/bitcoin-moon/server/src/controllers` - обработка запросов
- **Routes**: `/bitcoin-moon/server/src/routes` - определение API эндпоинтов

### Component-Based Architecture на клиенте
- Интерфейс разбит на переиспользуемые компоненты
- Каждый компонент имеет свою ответственность
- Компоненты организованы в иерархическую структуру

## Структура проекта
```
moonbit/
  bitcoin-moon/           # Основная директория проекта
    client/               # Клиентская часть
      src/                # Исходный код клиентской части
        components/       # React компоненты
        hooks/            # React хуки
        services/         # Сервисы для работы с API
        utils/            # Утилиты
      __tests__/          # Тесты клиентской части
        components/       # Тесты компонентов
      __mocks__/          # Моки для тестов
      public/             # Статические файлы
    server/               # Серверная часть
      src/                # Исходный код серверной части
        controllers/      # Контроллеры
        models/           # Модели данных
        routes/           # API маршруты
        services/         # Сервисы
        utils/            # Утилиты
      __tests__/          # Тесты серверной части
        routes/           # Тесты API маршрутов
        services/         # Тесты сервисов
        utils/            # Тесты утилит
      logs/               # Логи
  memory-bank/            # Банк памяти
  .cursor/                # Настройки Cursor
    rules/                # Правила проекта
```

## Паттерны данных

### Кэширование данных
- Данные из внешних API кэшируются в памяти
- Время жизни кэша устанавливается в зависимости от типа данных
- Используется проверка актуальности кэша перед выполнением внешних запросов

### Синхронизация данных
- Периодическое обновление данных из внешних источников
- Использование сервиса DataSyncService для управления процессом синхронизации
- Возможность ручного обновления данных при необходимости

## Паттерны API

### REST API
- Эндпоинты разделены по функциональности
- Используются соответствующие HTTP методы (GET, POST, PUT, DELETE)
- Возвращаются соответствующие HTTP статусы и стандартизированные JSON ответы

### Обработка ошибок
- Централизованная обработка ошибок
- Логирование ошибок с использованием winston
- Возврат понятных сообщений об ошибках клиенту

## Тестовые паттерны

### Тестирование серверной части
- Тесты хранятся в `/bitcoin-moon/server/__tests__/`
- Используется Jest и Supertest
- Моки для внешних зависимостей

### Тестирование клиентской части
- Тесты хранятся в `/bitcoin-moon/client/__tests__/`
- Используется Jest и React Testing Library
- Моки для API и ресурсов в `/bitcoin-moon/client/__mocks__/`

## UI паттерны

### Темная тема
- Использование классов Tailwind CSS для поддержки темной темы
- Переключение темы через контекст React
- Сохранение предпочтений пользователя в localStorage

### Адаптивный дизайн
- Использование Tailwind CSS для создания адаптивных компонентов
- Поддержка мобильных устройств, планшетов и десктопов
- Гибкие контейнеры и грид-система

## Практики разработки

### Именование
- **camelCase** для переменных и функций в JavaScript
- **PascalCase** для компонентов React
- **kebab-case** для CSS классов и файлов
- **UPPER_CASE** для констант

### Работа с Git
- Следование формату коммит-сообщений
- Разработка в отдельных ветках
- Code review перед слиянием 