# Активный контекст проекта MoonBit

## Текущий фокус разработки

### Восстановление сервисов
Сейчас наш основной фокус на восстановлении серверной части проекта:
- ✅ Восстановлен сервис логирования (logger.js)
- ✅ Восстановлен сервис синхронизации данных (DataSyncService.js)
- ✅ Восстановлен сервис для работы с данными о биткоине (BitcoinService.js)
- ✅ Восстановлен сервис для работы с данными о луне (MoonService.js)
- ✅ Восстановлен сервис для работы с астрологическими данными (AstroService.js)
- ✅ Восстановлен сервис для работы с событиями (EventsService.js)

### Тестирование
- ✅ Созданы интеграционные тесты для проверки взаимодействия между сервисами
- ⬜ Необходимо добавить модульные тесты для отдельных сервисов
- ⬜ Необходимо настроить CI/CD для автоматического запуска тестов

### Клиентская часть
- ✅ Основные компоненты React реализованы
- ⬜ Необходимо улучшить UX при загрузке данных
- ⬜ Необходимо оптимизировать производительность компонентов
- ⬜ Необходимо добавить динамическое переключение темы в зависимости от фазы луны

## Ключевые задачи и проблемы

### Приоритетные задачи
1. Завершить тестирование серверной части
2. Настроить CI/CD для автоматического деплоя
3. Оптимизировать алгоритмы расчета фаз луны
4. Улучшить стратегию кэширования для снижения нагрузки на внешние API

### Текущие проблемы
1. Лимиты запросов к CoinGecko API могут быть превышены при высокой нагрузке
2. Рассинхронизация данных между различными сервисами при ошибках внешних API
3. Проблемы с точностью вычисления фаз луны в некоторых граничных случаях

## Недавние изменения

### Последние коммиты
- [server]: feat - реализована синхронизация данных через DataSyncService
- [server]: feat - добавлен механизм кэширования для всех сервисов
- [server]: fix - исправлены проблемы с обработкой ошибок при недоступности внешних API
- [server]: refactor - улучшена структура маршрутов API

### Исправленные ошибки
- Исправлена проблема с утечкой памяти при длительной работе сервиса
- Исправлена ошибка в расчете фаз луны на некоторые даты
- Исправлены проблемы с кэшированием данных при ошибках записи в файловую систему
- Улучшена обработка ошибок в сервисе синхронизации данных

## Текущий статус развертывания

### Окружения
- **Разработка**: Локальное окружение разработчиков
- **Тестирование**: Недоступно (в процессе настройки)
- **Продакшн**: Недоступно (планируется после завершения развития MVP)

### Зависимости
- Внешние API:
  - CoinGecko API: Доступен, используется для получения данных о цене биткоина
  - FarmSense API: Доступен, используется для получения данных о фазах луны

## Предстоящие решения и дизайн

### Планируемые архитектурные изменения
- Переход на микросервисную архитектуру для улучшения масштабируемости
- Внедрение очереди сообщений для асинхронной обработки данных
- Добавление WebSocket для реал-тайм обновлений на клиенте

### Технические исследования
- Анализ возможности использования собственных алгоритмов расчета фаз луны
- Исследование альтернативных источников данных о цене биткоина
- Оценка потенциала машинного обучения для поиска корреляций между данными 